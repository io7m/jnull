<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>io7m-jnull 1.0.2 Documentation</title><link rel="stylesheet" type="text/css" href="jstructural-2.0.0-layout.css"/><link rel="stylesheet" type="text/css" href="jstructural-2.0.0-colour.css"/><link rel="stylesheet" type="text/css" href="documentation.css"/></head><body><div class="st200_body"><div class="brand">
  <div class="brand_left">
    <a href="http://io7m.com/">io7m</a>
  </div>
  <div class="brand_right">
    <a href="http://github.com/io7m/jnull">io7m-jnull</a> 1.0.2
  </div>
</div><div class="st200_document_title">io7m-jnull 1.0.2 Documentation</div><ul class="st200_contents st200_document_contents"><li class="st200_contents_item st200_contents_item1 st200_contents_item_part"><a href="#st200_p1">1. Package Information</a><ul class="st200_contents st200_part_contents"><li class="st200_contents_item st200_contents_item2 st200_contents_item_section"><a href="#st200_p1s1">1.1. Orientation</a></li><li class="st200_contents_item st200_contents_item2 st200_contents_item_section"><a href="#st200_p1s2">1.2. Installation</a></li><li class="st200_contents_item st200_contents_item2 st200_contents_item_section"><a href="#st200_p1s3">1.3. Platform Specific Issues</a></li><li class="st200_contents_item st200_contents_item2 st200_contents_item_section"><a href="#st200_p1s4">1.4. License</a></li></ul></li><li class="st200_contents_item st200_contents_item1 st200_contents_item_part"><a href="#st200_p2">2. Usage</a><ul class="st200_contents st200_part_contents"><li class="st200_contents_item st200_contents_item2 st200_contents_item_section"><a href="#st200_p2s1">2.1. Annotations</a></li><li class="st200_contents_item st200_contents_item2 st200_contents_item_section"><a href="#st200_p2s2">2.2. Checks</a></li><li class="st200_contents_item st200_contents_item2 st200_contents_item_section"><a href="#st200_p2s3">2.3. Complaints</a></li></ul></li><li class="st200_contents_item st200_contents_item1 st200_contents_item_part"><a href="#st200_p3">3. API Reference</a><ul class="st200_contents st200_part_contents"><li class="st200_contents_item st200_contents_item2 st200_contents_item_section"><a href="#st200_p3s1">3.1. Javadoc</a></li></ul></li></ul><div class="st200_part_container"><div class="st200_part_title_number"><a id="st200_p1" href="#st200_p1">1</a></div><div class="st200_part_title">Package Information</div><ul class="st200_contents st200_part_contents_outer st200_part_contents"><li class="st200_contents_item st200_contents_item1 st200_contents_item_section"><a href="#st200_p1s1">1.1. Orientation</a><ul class="st200_contents st200_section_contents"><li class="st200_contents_item st200_contents_item2 st200_contents_item_subsection"><a href="#st200_p1s1ss1">1.1.1. Overview</a></li></ul></li><li class="st200_contents_item st200_contents_item1 st200_contents_item_section"><a href="#st200_p1s2">1.2. Installation</a><ul class="st200_contents st200_section_contents"><li class="st200_contents_item st200_contents_item2 st200_contents_item_subsection"><a href="#st200_p1s2ss1">1.2.1. Source compilation</a></li><li class="st200_contents_item st200_contents_item2 st200_contents_item_subsection"><a href="#st200_p1s2ss2">1.2.2. Maven</a></li></ul></li><li class="st200_contents_item st200_contents_item1 st200_contents_item_section"><a href="#st200_p1s3">1.3. Platform Specific Issues</a></li><li class="st200_contents_item st200_contents_item1 st200_contents_item_section"><a href="#st200_p1s4">1.4. License</a></li></ul><div class="st200_section_container"><div class="st200_section_title_number"><a id="st200_p1s1" href="#st200_p1s1">1.1</a></div><div class="st200_section_title">Orientation</div><div class="st200_subsection_container"><div class="st200_subsection_title_number"><a id="st200_p1s1ss1" href="#st200_p1s1ss1">1.1.1</a></div><div class="st200_subsection_title">Overview</div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p1s1ss1pg1" href="#st200_p1s1ss1pg1">1</a></div><div class="st200_paragraph">
          The <span class="st200_term package">io7m-jnull</span> package implements
          implements a set of functions and annotations to improve the
          safety of Java code with regards to nullable references.
        </div></div></div></div><div class="st200_section_container"><div class="st200_section_title_number"><a id="st200_p1s2" href="#st200_p1s2">1.2</a></div><div class="st200_section_title">Installation</div><div class="st200_subsection_container"><div class="st200_subsection_title_number"><a id="st200_p1s2ss1" href="#st200_p1s2ss1">1.2.1</a></div><div class="st200_subsection_title">Source compilation</div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p1s2ss1pg1" href="#st200_p1s2ss1pg1">1</a></div><div class="st200_paragraph">
          The project can be compiled and installed with
          <a class="st200_link_external" href="http://maven.apache.org">Maven</a>:
        </div></div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p1s2ss1pg2" href="#st200_p1s2ss1pg2">2</a></div><div class="st200_paragraph">
          <pre class="st200_verbatim example">$ mvn -C clean install</pre>
        </div></div></div><div class="st200_subsection_container"><div class="st200_subsection_title_number"><a id="st200_p1s2ss2" href="#st200_p1s2ss2">1.2.2</a></div><div class="st200_subsection_title">Maven</div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p1s2ss2pg1" href="#st200_p1s2ss2pg1">1</a></div><div class="st200_paragraph">
          Regular releases are made to the
          <a class="st200_link_external" href="http://search.maven.org/#search%7Cga%7C1%7Cio7m-jnull">Central Repository</a>,
          so it's possible to use the <span class="st200_term package">io7m-jnull</span>
          package in your projects with the following Maven dependency:
        </div></div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p1s2ss2pg2" href="#st200_p1s2ss2pg2">2</a></div><div class="st200_paragraph">
          <pre class="st200_verbatim example">&lt;dependency&gt;
  &lt;groupId&gt;com.io7m.jnull&lt;/groupId&gt;
  &lt;artifactId&gt;io7m-jnull-core&lt;/artifactId&gt;
  &lt;version&gt;1.0.2&lt;/version&gt;
&lt;/dependency&gt;</pre>
        </div></div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p1s2ss2pg3" href="#st200_p1s2ss2pg3">3</a></div><div class="st200_paragraph">
          All <a class="st200_link_external" href="http://io7m.com">io7m.com</a>
          packages use Semantic Versioning
          <span class="st200_footnote_reference"><a id="st200_fn_0_ref" href="#st200_fn_0">[0]</a></span>, which implies that it is always safe to use version ranges
          with an exclusive upper bound equal to the next major version - the API of
          the package will not change in a backwards-incompatible manner before the
          next major version.
        </div></div></div></div><div class="st200_section_container"><div class="st200_section_title_number"><a id="st200_p1s3" href="#st200_p1s3">1.3</a></div><div class="st200_section_title">Platform Specific Issues</div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p1s3pg1" href="#st200_p1s3pg1">1</a></div><div class="st200_paragraph">
        There are currently no known platform-specific issues.
      </div></div></div><div class="st200_section_container"><div class="st200_section_title_number"><a id="st200_p1s4" href="#st200_p1s4">1.4</a></div><div class="st200_section_title">License</div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p1s4pg1" href="#st200_p1s4pg1">1</a></div><div class="st200_paragraph">
        All files distributed with the <span class="st200_term package">io7m-jnull</span>
        package are placed under the following license:
        <pre class="st200_verbatim license">Copyright Â© 2014 &lt;code@io7m.com&gt; http://io7m.com

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted, provided that the above
copyright notice and this permission notice appear in all copies.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
        </pre>
      </div></div></div></div><div class="st200_part_container"><div class="st200_part_title_number"><a id="st200_p2" href="#st200_p2">2</a></div><div class="st200_part_title">Usage</div><ul class="st200_contents st200_part_contents_outer st200_part_contents"><li class="st200_contents_item st200_contents_item1 st200_contents_item_section"><a href="#st200_p2s1">2.1. Annotations</a></li><li class="st200_contents_item st200_contents_item1 st200_contents_item_section"><a href="#st200_p2s2">2.2. Checks</a></li><li class="st200_contents_item st200_contents_item1 st200_contents_item_section"><a href="#st200_p2s3">2.3. Complaints</a></li></ul><div class="st200_section_container"><div class="st200_section_title_number"><a id="st200_p2s1" href="#st200_p2s1">2.1</a></div><div class="st200_section_title">Annotations</div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p2s1pg1" href="#st200_p2s1pg1">1</a></div><div class="st200_paragraph">
        Currently, there are at least six competing standards for 
        annotating fields and variables as not allowing 
        <span class="st200_term constant">null</span> values.
      </div></div><div class="st200_formal_item"><div class="st200_formal_item_title"><a id="st200_p2s1fo1" href="#st200_p2s1fo1">2.1.1. Non-null annotation standards</a></div><ul class="st200_list_unordered"><li class="st200_list_item">
            Java EE 6 
            <a class="st200_link_external" href="http://docs.oracle.com/javaee/6/api/javax/validation/constraints/NotNull.html">validation constraints</a>.
          </li><li class="st200_list_item">
            Findbugs
            <a class="st200_link_external" href="http://findbugs.sourceforge.net/manual/annotations.html">annotations</a>.
          </li><li class="st200_list_item">
            JSR 305
            <a class="st200_link_external" href="http://code.google.com/p/jsr-305/">annotations</a>.
          </li><li class="st200_list_item">
            IntelliJ IDEA
            <a class="st200_link_external" href="http://www.jetbrains.com/idea/webhelp/nullable-and-notnull-annotations.html">annotations</a>.
          </li><li class="st200_list_item">
            Project Lombok
            <a class="st200_link_external" href="http://projectlombok.org/features/GetterSetter.html">annotations</a>.
          </li><li class="st200_list_item">
            Annotations in the Eclipse
            <span class="st200_term type">org.eclipse.jdt.annotation</span> package.
          </li></ul></div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p2s1pg2" href="#st200_p2s1pg2">2</a></div><div class="st200_paragraph">
        Each of the above have various problems with regards to their use in
        portable Java programs. Firstly, three of them are essentially proprietary
        program-specific annotations (Findbugs, Intellij IDEA, Eclipse). Some of
        them are standardized but are subject to availability problems (Java EE 6
        annotations are only available on the Java EE 6 platform, and at the time
        of writing, JSR 305 is essentially abandoned). All of them differ in their
        retention semantics (JSR 305 and Java EE 6 annotations are retained at run-time,
        others may not be). At the time of writing, Java 8 has just been released and
        does not contain any definitions of <span class="st200_term type">@NotNull</span>
        annotations, but has incorporated JSR 308 <span class="st200_term term">type annotations</span>,
        which appears to subsume the intentions of JSR 305.
      </div></div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p2s1pg3" href="#st200_p2s1pg3">3</a></div><div class="st200_paragraph">
        Given the lack of a single standard for these annotations, the 
        <span class="st200_term package">io7m-jnull</span> package provides
        yet another competing set of annotations intended for use in all
        <a class="st200_link_external" href="http://io7m.com">io7m</a>
        packages. The annotations attempt to combine all of the desirable
        qualities of the above standards whilst attempting to be compatible
        with most of them.
      </div></div><div class="st200_formal_item"><div class="st200_formal_item_title"><a id="st200_p2s1fo2" href="#st200_p2s1fo2">2.1.2. Annotations</a></div><ul class="st200_list_unordered"><li class="st200_list_item">
            <a class="st200_link_external" href="apidocs/com/io7m/jnull/NonNull.html">@NonNull</a> indicates that a field or variable is never <span class="st200_term constant">null</span>.
          </li><li class="st200_list_item">
            <a class="st200_link_external" href="apidocs/com/io7m/jnull/Nullable.html">@Nullable</a> indicates that a field or variable may be <span class="st200_term constant">null</span>.
          </li><li class="st200_list_item">
            <a class="st200_link_external" href="apidocs/com/io7m/jnull/NullableByDefault.html">@NullableByDefault</a> indicates that all fields and variables in all classes of the annotated package are implicitly annotated <a class="st200_link_external" href="apidocs/com/io7m/jnull/Nullable.html">@Nullable</a>.
          </li><li class="st200_list_item">
            <a class="st200_link_external" href="apidocs/com/io7m/jnull/NonNullByDefault.html">@NonNullByDefault</a> indicates that all fields and variables in all classes of the annotated package are implicitly annotated <a class="st200_link_external" href="apidocs/com/io7m/jnull/NonNull.html">@NonNull</a>.
          </li></ul></div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p2s1pg4" href="#st200_p2s1pg4">4</a></div><div class="st200_paragraph">
        At the time of writing, the Eclipse IDE is capable of using
        the defined annotations in its static <span class="st200_term constant">null</span>
        reference checking. Project Lombok is capable of using the
        <a class="st200_link_external" href="apidocs/com/io7m/jnull/Nullable.html">@Nullable</a> and
        <a class="st200_link_external" href="apidocs/com/io7m/jnull/NonNull.html">@NonNull</a> annotations
        for code generation. The defined annotations are retained at run-time.
      </div></div></div><div class="st200_section_container"><div class="st200_section_title_number"><a id="st200_p2s2" href="#st200_p2s2">2.2</a></div><div class="st200_section_title">Checks</div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p2s2pg1" href="#st200_p2s2pg1">1</a></div><div class="st200_paragraph">
        The <a class="st200_link_external" href="apidocs/com/io7m/jnull/NullCheck.html">NullCheck</a>
        class provides functions for performing terse null-checks. The intention is to perform
        <span class="st200_term constant">null</span> checking inside constructors and on the 
        boundaries of public interfaces. The rationale for the existence of the 
        <span class="st200_term constant">null</span> checks at all is that although
        variables can be marked <a class="st200_link_external" href="apidocs/com/io7m/jnull/NonNull.html">@NonNull</a>
        and tools can statically indicate where a <span class="st200_term constant">null</span>
        value has been passed where a non-<span class="st200_term constant">null</span>
        value is expected, many programmers do not use these tools. If programmers
        are not using these tools, then they are free to pass
        <span class="st200_term constant">null</span> wherever they want - the language
        does not prevent it. It is better that checks occur on the boundaries
        of classes and interfaces where problems can be caught at an early stage
        rather than the code crashing at arbitrary locations
        because a <span class="st200_term constant">null</span> value worked its way into
        the program where one was not expected.
      </div></div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p2s2pg2" href="#st200_p2s2pg2">2</a></div><div class="st200_paragraph">
        A typical pattern is to perform the <span class="st200_term constant">null</span> 
        checks inside of constructors of immutable types:
      </div></div><div class="st200_formal_item"><div class="st200_formal_item_title"><a id="st200_p2s2fo1" href="#st200_p2s2fo1">2.2.1. Constructor checks</a></div><pre class="st200_verbatim">final class C
{
  private final @NonNull String name;
  
  public C(final @Nonnull String in_name)
  {
    this.name = NullCheck.notNull(in_name, "Name");
  }
  
  public @Nonnull String getName()
  {
    return this.name;
  }
}</pre></div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p2s2pg3" href="#st200_p2s2pg3">3</a></div><div class="st200_paragraph">
        If an abusive programmer attempts to construct a value of type
        <span class="st200_term type">C</span> with a
        <span class="st200_term constant">null</span> name, they will be
        told: <span class="st200_term constant">Null check failed: Expression evaluated to null: Name</span>,
        along with a stack trace indicating that the check failed in the
        constructor of the type. Without the explicit check, the same
        programmer could sneak <span class="st200_term constant">null</span> 
        into the program, and any code that called
        <span class="st200_term function">getName</span> would encounter
        an unexpectedly <span class="st200_term constant">null</span> value -
        far away from where the cause of problem actually originated.
      </div></div></div><div class="st200_section_container"><div class="st200_section_title_number"><a id="st200_p2s3" href="#st200_p2s3">2.3</a></div><div class="st200_section_title">Complaints</div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p2s3pg1" href="#st200_p2s3pg1">1</a></div><div class="st200_paragraph">
        Nullable references are a major design flaw that have infected
        almost all programming languages. Better languages rely on
        algebraic types and pattern matching to completely eliminate
        all classes of bugs related to nullable references.
      </div></div></div></div><div class="st200_part_container"><div class="st200_part_title_number"><a id="st200_p3" href="#st200_p3">3</a></div><div class="st200_part_title">API Reference</div><ul class="st200_contents st200_part_contents_outer st200_part_contents"><li class="st200_contents_item st200_contents_item1 st200_contents_item_section"><a href="#st200_p3s1">3.1. Javadoc</a></li></ul><div class="st200_section_container"><div class="st200_section_title_number"><a id="st200_p3s1" href="#st200_p3s1">3.1</a></div><div class="st200_section_title">Javadoc</div><div class="st200_paragraph_container"><div class="st200_paragraph_number"><a id="st200_p3s1pg1" href="#st200_p3s1pg1">1</a></div><div class="st200_paragraph">
        API documentation for the package is provided via the
        included <a class="st200_link_external" href="apidocs">Javadoc</a>.
      </div></div></div></div><div class="st200_footnotes"><hr/><div class="st200_footnote_container"><div class="st200_footnote_number">[<a id="st200_fn_0" href="#st200_fn_0_ref">0</a>]</div><div class="st200_footnote_body">
            <a class="st200_link_external" href="http://semver.org">http://semver.org</a>
          </div></div></div></div></body></html>
